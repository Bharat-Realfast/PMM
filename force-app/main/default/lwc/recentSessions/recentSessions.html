<template>
    <lightning-card>
        <!-- Lightning Card Header -->
        <div
            class="slds-border_bottom slds-var-p-left_small slds-var-p-bottom_small slds-var-p-top_xxx-small"
        >
            <h1 slot="title" class="header-title-container slds-card__header-title">
                {labels.recentSessions}
            </h1>
        </div>

        <!-- Lightning Card Body -->

        <div
            class="component-height slds-scrollable_y"
            style="margin-bottom: 0px;background-color:#f3f2f2"
        >
            <template
                for:each={sessionsData}
                for:item="sessionData"
                if:true={sessionsData}
            >
                <c-accordion-section
                    class="slds-var-p-right_small"
                    key={sessionData.sessionStartDate}
                    open-current-section={sessionData.openCurrentSection}
                >
                    <div slot="clickableHeaderSection" style="font-size: 14px;">
                        {sessionData.sessionStartDate}
                    </div>
                    <div slot="extraInfoSection">
                        {sessionData.totalSessions}
                    </div>

                    <template for:each={sessionData.sessions} for:item="session">
                        <lightning-record-view-form
                            record-id={session.Id}
                            object-api-name={serviceSessionObject}
                            key={session.Id}
                        >
                            <div
                                class="slds-box slds-var-m-top_x-small slds-theme_default"
                            >
                                <lightning-layout
                                    multiple-rows="true"
                                    density="compact"
                                    pull-to-boundary="small"
                                >
                                    <lightning-layout-item
                                        size="8"
                                        class="slds-var-p-left_x-small "
                                    >
                                        <a href="#">{session.Name} </a>
                                    </lightning-layout-item>
                                    <lightning-layout-item
                                        size="4"
                                        class="slds-list_horizontal slds-grid_vertical-align-center"
                                    >
                                        <lightning-icon
                                            tabindex="0"
                                            icon-name="utility:success"
                                            alternative-text={labels.success}
                                            size="x-small"
                                            variant="success"
                                            title={labels.success}
                                            if:true={session.showCompleteIcon}
                                        ></lightning-icon>
                                        <lightning-output-field
                                            field-name={fields.status}
                                            variant="label-hidden"
                                            class="slds-var-p-left_x-small"
                                        >
                                        </lightning-output-field>
                                    </lightning-layout-item>
                                    <lightning-layout-item
                                        size="12"
                                        class="slds-var-p-left_x-small slds-var-m-top_xxx-small slds-list_horizontal"
                                    >
                                        <lightning-formatted-date-time
                                            value={session.sessionStartDate}
                                            hour="2-digit"
                                            minute="2-digit"
                                        ></lightning-formatted-date-time>
                                        <span
                                            class="slds-var-p-left_x-small slds-var-p-right_x-small"
                                            >|</span
                                        >
                                        <span>{session.serviceName}</span>
                                    </lightning-layout-item>

                                    <lightning-layout-item
                                        size="8"
                                        class="slds-list_horizontal slds-var-m-top_x-small slds-var-p-left_x-small slds-grid_vertical-align-center"
                                    >
                                        <lightning-icon
                                            tabindex="0"
                                            icon-name="utility:user"
                                            alternative-text={labels.user}
                                            size="x-small"
                                            title={labels.user}
                                            if:true={session.showPrimaryServiceProviderIcon}
                                        ></lightning-icon>
                                        <lightning-output-field
                                            field-name={fields.primaryServiceProvider}
                                            variant="label-hidden"
                                            class="slds-var-p-left_x-small"
                                        >
                                        </lightning-output-field>
                                    </lightning-layout-item>
                                </lightning-layout>
                            </div>
                        </lightning-record-view-form>
                    </template>
                </c-accordion-section>
            </template>
        </div>
    </lightning-card>
</template>
