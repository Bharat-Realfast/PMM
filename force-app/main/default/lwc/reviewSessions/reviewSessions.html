<template>
    <c-section title={labels.reviewSessions}></c-section>
    <lightning-layout
        multiple-rows="true"
        horizontal-align="center"
        pull-to-boundary="medium"
    >
        <lightning-layout-item size="5" class="slds-var-m-top_x-small">
            <div
                style="font-weight: bold;"
                class="slds-float_left slds-var-m-top_large slds-var-m-right_x-large"
            >
                {totalServiceSessions}
            </div>
        </lightning-layout-item>
        <lightning-layout-item size="5">
            <div
                class="slds-float_right slds-var-m-top_large slds-var-m-left_x-large slds-var-m-bottom_xx-small"
            >
                <lightning-button
                    variant="Neutral"
                    label={labels.addSession}
                    onclick={handleAddSession}
                ></lightning-button>
            </div>
            <c-modal header={labels.addSession} is-nested="true">
                <div style="height: 400px;">
                    <template if:true={addSessionError}>
                        <c-scoped-notification
                            theme="error"
                            title={addSessionError}
                        ></c-scoped-notification>
                    </template>
                    <lightning-record-edit-form object-api-name={objectName}>
                        <lightning-input-field
                            field-name={sessionStartFieldName}
                            required
                        ></lightning-input-field>
                        <lightning-input-field
                            field-name={sessionEndFieldName}
                            required
                        ></lightning-input-field>
                    </lightning-record-edit-form>
                </div>

                <div slot="footer">
                    <lightning-layout>
                        <lightning-layout-item>
                            <lightning-button
                                label={labels.cancel}
                                variant="neutral"
                                onclick={closeModal}
                            ></lightning-button>
                        </lightning-layout-item>
                        <lightning-layout-item alignment-bump="left">
                            <lightning-button
                                label={labels.saveNew}
                                variant="neutral"
                                onclick={handleSaveNewSession}
                            ></lightning-button>
                            <lightning-button
                                label={labels.save}
                                variant="brand"
                                onclick={handleSaveSession}
                                class="slds-var-p-left_medium"
                            ></lightning-button>
                        </lightning-layout-item>
                    </lightning-layout>
                </div>
            </c-modal>
        </lightning-layout-item>
        <lightning-layout-item size="10">
            <div
                class="slds-box slds-p-around_none slds-var-m-top_x-small"
                style="width:fit-content"
            >
                <lightning-datatable
                    key-field="Id"
                    columns={columns}
                    data={serviceSessions}
                    hide-checkbox-column
                    show-row-number-column
                    onrowaction={handleDelete}
                >
                </lightning-datatable>
            </div>
        </lightning-layout-item>
    </lightning-layout>
</template>
